name: Selenium Test Run                          

on:
  schedule:
    - cron: "*/10 * * * *"                                                                    

jobs:
  run-script:
    runs-on: ubuntu-latest

    steps:
      - name: Check out the code
        uses: actions/checkout@v3
  
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11.7"                                                           
  
      - name: Install dependencies                         
        run: |
          python -m pip install --upgrade pip
          pip install -r banner_req.txt                                        
  
      - name: Set up ChromeDriver
        run: |
          sudo apt-get update
          sudo apt-get install -y unzip xvfb libxi6 libgconf-2-4
          sudo apt-get install -y chromium-browser
          wget -O /tmp/chromedriver.zip https://chromedriver.storage.googleapis.com/$(curl -sS chromedriver.storage.googleapis.com/LATEST_RELEASE)/chromedriver_linux64.zip
          unzip /tmp/chromedriver.zip -d /tmp/
          sudo mv /tmp/chromedriver /usr/local/bin/chromedriver
          sudo chmod +x /usr/local/bin/chromedriver
          export CHROMEDRIVER_PATH="/usr/local/bin/chromedriver"
          export DISPLAY=:99
          Xvfb :99 -screen 0 1024x768x24 &
  
      - name: Run Selenium script
        run: |
          python banner_test.py
